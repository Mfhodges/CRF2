

{% load rest_framework %}
{% load template_extra %}



<p> Course site title will default to <i> {{ course.course_name }}  </i>. You may modify it in the box provided below. </p>
{% render_field request_form.title_override style=style %}

<p> If you would like to copy content from an existing course site, please select the source from the list below.</p>
{% render_field request_form.copy_from_course style=style %}

<fieldset>
  <legend><h6 style="margin:0;">Mulit-Section Course Sites </h6></legend>
  <div class="form-group ">
    <p style="font-size:0.9rem;"> Sections of a course can share a single Canvas site. If you are teaching a large introductory course
      or several sections of a course, you can have the sections broken out into a single site. Please select all sections you would like included. If a course is gray-ed out that means it has been already requested in another course request and therefore cannot be added to this one
    </p>
    {% if course.sections %} <!-- if there are sections -->
        <div class="contain-table vertical-center">

          <table style="max-width:500px;">
            <thead>
              <tr>
                <th>Select</th>
                <th>Course Code</th>
                <th>Activity</th>
                <th>Request Status</th>
              </tr>
          </thead>
          <tbody>
        {% for section_code,section_activity,section_requested in course.sections %}

          {% if section_code in request_instance.additional_sections %}
            <tr>
              <td>
                <!-- check if already requested -> cannot be requested -->
                <input  name="additional_sections[{{ forloop.counter0 }}][course_code]" value="{{section_code}}" class="form-control" type="checkbox" checked>
              </td>
              <td> {{section_code}}</td> <td> {{section_activity}} </td> <td> {{section_requested}} a</td>
            </tr>
          {# must be in some other request! #}
          {% elif section_request %}
            <tr style="background:#e9ecef;">
              <td>
                <!-- check if already requested -> cannot be requested -->
                <input  name="additional_sections[{{ forloop.counter0 }}][course_code]" value="{{section_code}}" class="form-control" type="checkbox" disabled>
              </td>
              <td> {{section_code}}</td> <td> {{section_activity}} </td> <td> {{section_requested}} b</td>
            </tr>

          {% else %}
          <tr >
            <td>
              <!-- check if already requested -> cannot be requested -->
              <input  name="additional_sections[{{ forloop.counter0 }}][course_code]" value="{{section_code}}" class="form-control" type="checkbox">
            </td>
            <td> {{section_code}}</td> <td> {{section_activity}} </td> <td> {{section_requested}} c</td>
          </tr>
          {% endif %}


        {% endfor %}
      </tbody>
    </table>

    <small> </small>
    {% else %}
    <center><i><p>There are no other sections associated with this course. </p></i></center>
    {% endif %}
  </div>
</fieldset>

  <fieldset>
    <legend><h6 style="margin:0;">Library Services</h6></legend>
    <p> Course Reserve services are available to your course. See <a href="http://www.library.upenn.edu/using-libraries/reserves"> http://www.library.upenn.edu/using-libraries/reserves</a> for more information.</p>

    {% render_field request_form.reserves style=style %}
  </fieldset>


  <fieldset>
    <legend><h6 style="margin:0;">Add Additional Users </h6></legend>
    <!--<b><p> ADD CONTENT HERE </p></b>
     wowie -->
    <p> This is for adding TA's, Instructors, Designers, Librarians ..NOT students</p>

    <fieldset id="additional_enrollments" style="border:none;padding-right:0px;padding-left:0px;">
      <p><mark> no validation on pennkey yet.</mark></p>
      {% if request_instance.additional_enrollments %}
        {% for enrollment in request_instance.additional_enrollments %}

          <div id="addEnroll-{{ forloop.counter0 }}" class="row vertical-center" style="">
            <label style="width: 45%;" for="name">
            User(pennkey)
            <input  name="additional_enrollments[{{ forloop.counter0 }}][user]" value="{{enrollment.user}}" class="form-control" type="text">
            </label>
            <label>
          Role
          <!--<input name="additional_enrollments[0][role]" value="" class="form-control" type="text">-->
          <select id="choose" name="additional_enrollments[{{ forloop.counter0 }}][role]" >
            <option disabled>Please select</option>
            <option value="TA" {% if enrollment.role == "TA" %} selected {% endif %}>TA</option>
            <option value="DES" {% if enrollment.role == "DES" %} selected {% endif %}>Designer</option>
            <option value="LIB" {% if enrollment.role == "LIB" %} selected {% endif %}>Librarian</option>
            <option value="INST" {% if enrollment.role == "INST" %} selected {% endif %}>Librarian</option>
          </select>
            </label>
          <a onClick="removeElement('additional_enrollments', 'addEnroll-{{ forloop.counter0 }}');" style="padding-left:5px;"> Delete <i class="fas fa-times"></i></a>
        </div>
      {% endfor %}
    {% else %}

    <!-- to validate this see https://stackoverflow.com/questions/5272433/html5-form-required-attribute-set-custom-validation-message -->
        <div id="addEnroll-1" class="row vertical-center" style="">
          <label style="width: 45%;">
            user
          <input name="additional_enrollments[0][user]" value="" class="form-control" type="text">
          </label>
          <label>
          role
          <!--<input name="additional_enrollments[0][role]" value="" class="form-control" type="text">-->
          <select id="choose" name="additional_enrollments[0][role]" >
            <option disabled selected>Please select</option>
            <option value="TA">TA</option>
            <option value="DES">Designer</option>
            <option value="LIB">Librarian</option>
            <option value="INST">Instructor</option>

          </select>
          </label>
          <a onClick="removeElement('additional_enrollments', 'addEnroll-1');" style="padding-left:5px;"> Delete <i class="fas fa-times"></i></a>
        </div>
    {% endif %}
    </fieldset>
    <div onclick="addrow()"> <a>
      <i class="fas fa-plus"></i> add another </a>
    </div>



  </fieldset>


{% render_field request_form.additional_instructions style=style %}


<!-- here is the field to edit the subaccount that is associated with the course.
  this is not going to implemented yet
 -->
