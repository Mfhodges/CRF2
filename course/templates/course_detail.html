{% extends "base_generic.html" %}
{% load rest_framework %}


{% block content %}

  <!-- course info -->
  <fieldset>
  <legend>Course Info: {{ course.course_code}}</legend>
  <dl class="row" style="line-height:1.1;">
        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">SRS Title</dt>
        <dd class="col-8 col-md-9"> {{ course.course_name }}</dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Subject Area</dt>
        <dd class="col-8 col-md-9">{{course.course_subjects| join:", "}}</dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">School</dt>
        <dd class="col-8 col-md-9">{{course.course_schools| join:", "}}</dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Activity</dt>
        <dd class="col-8 col-md-9">{{course.course_activity }}</dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Term</dt>
        <dd class="col-8 col-md-9">{{ course.course_term }}</dd>


        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Cross Listing</dt>
        <dd class="col-8 col-md-9">
          {% if course.crosslisted %}
            {% for crosscourse in course.crosslisted %}
              {% if forloop.last %}<a href='{% url "UI-course-detail" course_code=crosscourse %}'>{{ crosscourse }}</a>{% else %}
                <a href='{% url "UI-course-detail" course_code=crosscourse %}'>{{ crosscourse }}</a>,{% endif %}
            {% endfor %}
          {% else %}
            None
          {% endif %}

        </dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Instructor</dt>
        <dd class="col-8 col-md-9">{% if course.instructors|length == 0 %} STAFF {% else %}{{ course.instructors| join:", "}} {% endif %}</dd>
    </dl>
  </fieldset>
<!-- end course info -->

<!-- Start Notice banner -->


<!-- End Notice banner -->

<!-- Request Form -->
  <!-- if already requested this should just be request details?
        BUT how do you handle sections ? -->
  {% if not course.requested %}
  <form action="{% url 'request-list' %}" method="post" id="RequestForm">
  <fieldset >
  <legend>Canvas Site Options</legend>
  {% csrf_token %}
  <input name="view_type" class="form-control" type="hidden" value="UI-request-detail">
  <input name='course_requested' value='{{course.course_code}}' type='hidden'>
<!--  {% render_form request_form %} -->
  <p> Course site title will default to <i> {{ course.course_name }} </i>. You may modify it in the box provided below. </p>
  {% render_field request_form.title_override style=style %}

  <p> If you would like to copy content from an existing course site, please select the source from the list below.</p>
  {% render_field request_form.copy_from_course style=style %}

  <fieldset>
    <legend><h6 style="margin:0;">Mulit-Section Course Sites </h6></legend>
    <b><p> ADD CONTENT HERE </p></b>
  </fieldset>

    <fieldset>
      <legend><h6 style="margin:0;">Library Services</h6></legend>
      {% render_field request_form.reserves style=style %}
    </fieldset>



  {% render_field request_form.additional_instructions style=style %}

  <input type="submit" value="Submit Request" />
  </fieldset>
  </form>


  {% else %}
  <!-- course request history -->
  <fieldset >
    <legend>Submitted Request</legend>

    {% if course.crosslisted %}
    <div style="padding-bottom:10px;">
      <dt class="" style="padding-right: 0px;">Requested From Crosslist:</dt>
      <dd class="" style="padding-left: 10px;"> This course was requested under it's cross listing {{ request_instance.course_requested }}</dd>
    </div>
    {% endif %}

    <dl class="row" style="line-height:1.1;">

          <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Status</dt>
          <dd class="col-8 col-md-9"> {{ request_instance.status }}</dd>

          <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Requestor</dt>
          <dd class="col-8 col-md-9"> {{ request_instance.owner }}
            {% if request_instance.masquerade %}
              ( as {{ request_instance.masquerade}} )
            {% endif %}
          </dd>

          <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Created</dt>
          <dd class="col-8 col-md-9"> {{ request_instance.created }}</dd>

          <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Updated</dt>
          <dd class="col-8 col-md-9"> {{ request_instance.updated }}</dd>
    </dl>

    <div class="form-group ">
      <label>Title override</label>
      <input name="title_override" class="form-control" type="text" value="{{ request_instance.title_override }}" disabled>
    </div>

    <div class="form-group ">
      <label>Copy from course</label>
      <input name="copy_from_course" class="form-control" type="text" value="{{ request_instance.copy_from_course }}" disabled>
    </div>

  <fieldset>
    <legend><h6 style="margin:0;">Multi-Section Course Sites</h6></legend>
      <div class="form-group ">
        <b><p> ADD CONTENT HERE </p></b>
      </div>
  </fieldset>

    <fieldset>
          <legend><h6 style="margin:0;">Library Services</h6></legend>
          <dl class="row" style="line-height:1.1;">
                <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Reserves</dt>
                <dd class="col-8 col-md-9"> {{ request_instance.reserves }}</dd>
          </dl>
    </fieldset>


    <div class="form-group ">
      <label>Additional instructions</label>
      <textarea name="additional_instructions" class="form-control" value="{{ request_instance.additional_instructions }}" disabled></textarea>
    </div>

    {% if course.crosslisted %}
      <a href='{% url "UI-request-detail" pk=request_instance.course_requested %}'> See Full Request for {{request_instance.course_requested}}</a>
    {% else %}
      <a href='{% url "UI-request-detail" pk=course.course_code %}'> See Full Request for {{ course.course_code}} </a>
    {% endif %}


  </fieldset>
  {% endif %}
<!-- end request form -->


<!-- Canvas Site info -->
<fieldset>
  <legend>Canvas Site</legend>
 {% if request_instance.canvas_instance %}
  <dl class="row" style="line-height:1.1;">
        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Name</dt>
        <dd class="col-8 col-md-9"> </dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">Workflow State</dt>
        <dd class="col-8 col-md-9"> </dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">SIS Course ID</dt>
        <dd class="col-8 col-md-9"> </dd>

        <dt class="col-4 col-md-3 text-right" style="padding-right: 0px;">URL</dt>
        <dd class="col-8 col-md-9"> </dd>
  </dl>

  {% else %}
  <p> no canvas instance created yet </p>

  {% endif %}

</fieldset>
<!-- END Canvas Site info -->









{% endblock %}
